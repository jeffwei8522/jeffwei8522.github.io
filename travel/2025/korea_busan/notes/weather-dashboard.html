<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <link rel="stylesheet" href="../style.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é‡œå±±è¡Œç¨‹å¤©æ°£äº’å‹•å„€è¡¨æ¿</title>

  <!-- é—œé–‰ Tailwind Preflightï¼Œé¿å…èˆ‡å…¨ç«™ä¸»é¡Œè¡çª -->
  <script>
    window.tailwind = {
      config: {
        corePlugins: { preflight: false }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet"/>

  <style>
    /* ä½œç”¨åŸŸé–åœ¨ #wd-appï¼Œé¿å…å…¨ç«™æ¨£å¼äº’ç›¸è¦†è“‹ */
    #wd-app {
      font-family: 'Inter','Noto Sans TC',sans-serif;
      background-color: #FDFBF8; /* Warm neutral */
    }
    #wd-app .active-tab {
      background-color: #A67B5B !important;
      color: #FFFFFF !important;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    #wd-app .advice-toggle { transition: all 0.3s ease-in-out; }
    #wd-app .advice-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-in-out;
    }
    #wd-app .advice-content.open { max-height: 500px; }
    #wd-app .timeline-item::before {
      content: '';
      position: absolute;
      left: -20px;
      top: 8px;
      width: 12px; height: 12px; border-radius: 50%;
      background-color: #D3B8A5; border: 2px solid #FDFBF8;
    }
    #wd-app .timeline-line {
      position: absolute; left: -15px; top: 8px; bottom: 0;
      width: 2px; background-color: #EAE0D9;
    }
  </style>
</head>

<body class="text-gray-700">
  <!-- ä½œç”¨åŸŸå®¹å™¨ -->
  <div id="wd-app">
    <div class="mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
      <header class="text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-[#A67B5B]">é‡œå±±è¡Œç¨‹å¤©æ°£æ‡‰å°æŒ‡å—</h1>
        <p class="text-lg text-gray-500 mt-2">2025å¹´8æœˆ19æ—¥ - 8æœˆ24æ—¥</p>
      </header>

      <section id="overall-summary" class="bg-white rounded-2xl shadow-sm p-6 mb-8 border border-gray-200">
        <h2 class="text-2xl font-bold text-[#A67B5B] mb-4">ç¸½é«”å¤©æ°£å±•æœ›</h2>
        <div class="grid md:grid-cols-3 gap-4 text-center">
          <div class="bg-[#FDFBF8] p-4 rounded-lg">
            <p class="text-4xl mb-1">ğŸŒ¡ï¸</p>
            <p class="font-semibold text-lg">é«˜æº«é«˜æ¿•</p>
            <p class="text-gray-600">30Â°C - 33Â°Cï¼Œé«”æ„Ÿæ‚¶ç†±</p>
          </div>
          <div class="bg-[#FDFBF8] p-4 rounded-lg">
            <p class="text-4xl mb-1">ğŸŒ¦ï¸</p>
            <p class="font-semibold text-lg">é–“æ­‡æ€§é™é›¨</p>
            <p class="text-gray-600">ç•™æ„åˆå¾Œå±€éƒ¨é™£é›¨</p>
          </div>
          <div class="bg-[#FDFBF8] p-4 rounded-lg">
            <p class="text-4xl mb-1">ğŸŒ€</p>
            <p class="font-semibold text-lg">ç„¡ç›´æ¥é¢±é¢¨</p>
            <p class="text-gray-600">ç›®å‰é å ±æ©Ÿç‡æ¥µä½</p>
          </div>
        </div>
      </section>

      <nav id="day-navigation" class="flex flex-wrap justify-center gap-2 mb-8"></nav>
      <main id="daily-content"></main>

      <footer id="core-advice" class="bg-white rounded-2xl shadow-sm p-6 mt-8 border border-gray-200">
        <h2 class="text-2xl font-bold text-[#A67B5B] mb-4">æ ¸å¿ƒæº–å‚™å»ºè­°</h2>
        <ul class="grid md:grid-cols-2 gap-x-8 gap-y-4 list-none">
          <li class="flex items-start"><span class="mr-3 text-xl">ğŸ‘•</span><div><strong class="text-gray-800">è¼•ä¾¿è¡£ç‰©ï¼š</strong>ä»¥é€æ°£ã€å¿«ä¹¾æè³ªç‚ºä¸»ï¼Œå¯å¤šå‚™Tæ¤æ›¿æ›ã€‚</div></li>
          <li class="flex items-start"><span class="mr-3 text-xl">â˜‚ï¸</span><div><strong class="text-gray-800">é˜²æ›¬é˜²æš‘ï¼š</strong>é«˜ä¿‚æ•¸é˜²æ›¬ã€å¤ªé™½çœ¼é¡ã€é®é™½å¸½åŠæ™´é›¨å‚˜å¿…å‚™ã€‚</div></li>
          <li class="flex items-start"><span class="mr-3 text-xl">ğŸ‘Ÿ</span><div><strong class="text-gray-800">èˆ’é©é‹å±¥ï¼š</strong>æº–å‚™é˜²æ°´æ¶¼é‹æˆ–æ‹–é‹ï¼Œæ‡‰å°çªç™¼é™é›¨å’Œæµ·ç˜æ´»å‹•ã€‚</div></li>
          <li class="flex items-start"><span class="mr-3 text-xl">ğŸ’§</span><div><strong class="text-gray-800">éš¨æ™‚è£œæ°´ï¼š</strong>æ”œå¸¶æ°´ç“¶ï¼Œå–„ç”¨ä¾¿åˆ©å•†åº—èˆ‡å’–å•¡é¤¨è£œå……æ°´åˆ†ã€‚</div></li>
        </ul>
      </footer>
    </div>
  </div>

  <script>
    // === è¡Œç¨‹è³‡æ–™ï¼ˆåŠ ä¸Š ISO æ—¥æœŸï¼Œæ”¯æ´è‡ªå‹•é–‹åˆ°ä»Šå¤© / ç›´é”æŸå¤©ï¼‰ ===
    const tripData = [
      {
        day: 1, iso: "2025-08-19", date: "8æœˆ19æ—¥ (äºŒ)", title: "æŠµé”æ—¥ï¼Œé™£é›¨ä¸­çš„è¥¿é¢æ¢ç´¢",
        weather: { tempMin: 26, tempMax: 30, rainProb: 60, desc: "ä¸Šåˆæœ‰é›¨ï¼Œä¸‹åˆè½‰å¤šé›²" },
        itinerary: [
          { time: "13:25", title: "æŠµé”æ©Ÿå ´", risk: "ä½", impact: "æŠµé”æ™‚å¯èƒ½ä»åœ¨ä¸‹é›¨ï¼Œä½†ä¸å½±éŸ¿æ©Ÿå ´è‡³é£¯åº—çš„äº¤é€šã€‚", advice: "å»ºè­°é ç•™å……è£•äº¤é€šæ™‚é–“ï¼Œç›´æ¥æ­ä¹˜åœ°éµæˆ–è¨ˆç¨‹è»Šå‰å¾€é£¯åº—ã€‚" },
          { time: "18:30", title: "é›™èƒèƒè±¬è‚‰æ¹¯é£¯", risk: "ä½", impact: "å®¤å…§ç”¨é¤ï¼Œä¸å—å½±éŸ¿ã€‚", advice: "ç„¡éœ€ç‰¹åˆ¥æº–å‚™ã€‚" },
          { time: "20:00", title: "è¥¿é¢åœ°ä¸‹è¡—", risk: "æ¥µä½", impact: "å®Œç¾æ‡‰å°æ–¹æ¡ˆã€‚å®Œå…¨å®¤å…§æ´»å‹•ï¼Œé¿é–‹é›¨å‹¢å’Œæ‚¶ç†±å¤©æ°£ã€‚", advice: "æ‚¨çš„è¡Œç¨‹å®‰æ’å°å¤©æ°£çš„è€å—æ€§æ¥µé«˜ï¼Œç„¡éœ€æ›´æ”¹ã€‚" }
        ]
      },
      {
        day: 2, iso: "2025-08-20", date: "8æœˆ20æ—¥ (ä¸‰)", title: "å¤šé›²ä¸‹çš„æ–‡åŒ–æ‘å¾’æ­¥æŒ‘æˆ°",
        weather: { tempMin: 26, tempMax: 32, rainProb: 30, desc: "å…¨å¤©å¤šé›²" },
        itinerary: [
          { time: "09:00", title: "ç”˜å·æ´æ–‡åŒ–æ‘", risk: "é«˜", impact: "ä¸»è¦æŒ‘æˆ°ç‚ºé«˜æº«é«˜æ¿•ã€‚åœ¨ä¸˜é™µåœ°å½¢å¤§é‡æ­¥è¡Œæ˜¯åš´å³»çš„é«”åŠ›è€ƒé©—ã€‚", advice: "é˜²æš‘æ˜¯é—œéµï¼å»ºè­°ææ—©å‡ºç™¼ï¼Œåˆ©ç”¨æ—©æ™¨ç›¸å°æ¶¼çˆ½æ™‚æ®µã€‚éš¨æ™‚è£œå……æ°´åˆ†ã€‚" },
          { time: "10:00", title: "éŸ“æœé«”é©—", risk: "ä¸­", impact: "èˆ’é©åº¦é¢¨éšªé«˜ã€‚åœ¨æ‚¶ç†±å¤©æ°£ä¸‹ç©¿è‘—å‚³çµ±éŸ“æœæœƒéå¸¸ç‚ç†±ã€‚", advice: "å¯è€ƒæ…®ç¸®çŸ­é«”é©—æ™‚é–“ï¼Œæˆ–é¸æ“‡æœ‰å®¤å…§æ”å½±æ£šçš„åº—å®¶ã€‚" },
          { time: "12:30", title: "æ¾å³¶æµ·ä¸Šçºœè»Š", risk: "ä½", impact: "å¤šé›²å¤©æ°£ä¸å½±éŸ¿ç‡Ÿé‹ï¼Œé™¤éå‡ºç¾é å ±å¤–çš„å¼·é¢¨æˆ–é›·æš´ã€‚", advice: "éš¨èº«æ”œå¸¶è¼•ä¾¿é›¨å…·ä»¥é˜²è¬ä¸€ã€‚" },
          { time: "15:00", title: "ç™½æ·ºç˜æ–‡åŒ–æ‘", risk: "é«˜", impact: "èˆ‡ç”˜å·æ´é¡ä¼¼ï¼Œä¸»è¦æŒ‘æˆ°ç‚ºé«˜æº«é«˜æ¿•ã€‚", advice: "æ¯å°æ™‚éƒ½æ‡‰é€²å…¥å’–å•¡é¤¨æˆ–å•†åº—ç¨ä½œä¼‘æ¯ï¼Œå¹å†·æ°£ä¸¦è£œå……æ°´åˆ†ã€‚" },
        ]
      },
      {
        day: 3, iso: "2025-08-21", date: "8æœˆ21æ—¥ (å››)", title: "æ™´é›¨å…¼å‚™çš„æµ·é›²å°æ™ºæ…§éŠ",
        weather: { tempMin: 26, tempMax: 31, rainProb: 20, desc: "ä¸Šåˆå¤šé›²ï¼Œä¸‹åˆæ™´" },
        itinerary: [
          { time: "12:30", title: "æµ·ç˜æ•£æ­¥", risk: "ä½", impact: "å¤©æ°£æ¢ä»¶é©åˆã€‚ä¸‹åˆé™½å…‰å¯èƒ½è¼ƒå¼·ã€‚", advice: "å‹™å¿…æ³¨æ„é˜²æ›¬ï¼Œå¡—æŠ¹é˜²æ›¬éœœã€‚" },
          { time: "13:30", title: "SEA LIFE æµ·é›²å°æ°´æ—é¤¨", risk: "æ¥µä½", impact: "çµ•ä½³çš„å®¤å…§å®‰æ’ï¼Œèƒ½æœ‰æ•ˆè¦é¿ä¸€å¤©ä¸­æœ€ç†±çš„æ™‚æ®µã€‚", advice: "æœ¬æ—¥è¡Œç¨‹çµæ§‹æ¥µä½³ï¼Œç„¡éœ€èª¿æ•´ã€‚" },
          { time: "17:30", title: "Centum City Spa Land", risk: "æ¥µä½", impact: "å®Œç¾çš„å®¤å…§è¦åŠƒï¼Œå®Œå…¨ä¸å—å¤©æ°£å½±éŸ¿ã€‚", advice: "ç„¡éœ€å‚™æ¡ˆï¼Œå¥½å¥½äº«å—ã€‚" }
        ]
      },
      {
        day: 4, iso: "2025-08-22", date: "8æœˆ22æ—¥ (äº”)", title: "é›²éœ§ä¸­çš„æµ·å²¸ç·šèˆ‡é«˜ç©ºæ™¯è§€",
        weather: { tempMin: 26, tempMax: 32, rainProb: 30, desc: "å…¨å¤©æ™´æ™‚å¤šé›²" },
        itinerary: [
          { time: "10:30", title: "æµ·é›²å°å¤©ç©ºè† å›Šåˆ—è»Š", risk: "ä½", impact: "åˆ—è»Šåœ¨é›¨å¤©ç…§å¸¸é‹è¡Œï¼Œä¸»è¦å½±éŸ¿æ˜¯è§€æ™¯è¦–é‡ã€‚", advice: "æ”œå¸¶é›¨å…·ï¼Œä¸¦å°è¦–é‡å—é™æœ‰å¿ƒç†æº–å‚™ã€‚" },
          { time: "11:15", title: "é’æ²™æµ¦å¤©ç©ºæ­¥é“", risk: "ä¸­", impact: "è‹¥é‡çŸ­æ™‚é™£é›¨ï¼Œæ­¥é“å¯èƒ½æœƒæš«æ™‚é—œé–‰æˆ–å› æ¿•æ»‘å½±éŸ¿é«”é©—ã€‚", advice: "å‡ºç™¼å‰ï¼Œå¯å…ˆæŸ¥è©¢å¤©ç©ºæ­¥é“æ˜¯å¦æ­£å¸¸é–‹æ”¾ã€‚" },
          { time: "19:00", title: "Busan X the Sky", risk: "ä¸­", impact: "è§€æ™¯é¢¨éšªã€‚å¤šé›²å¤©æ°£å¯èƒ½å°è‡´è¦–é‡å—é™ï¼Œç„¡æ³•çœ‹åˆ°æœ€ä½³å¤œæ™¯ã€‚", advice: "ä¿æŒå½ˆæ€§ã€‚ç•¶å¤©æ—©ä¸Šå†æ¬¡ç¢ºèªå¤©æ°£ï¼Œè‹¥é›²å±¤åšï¼Œå¯è€ƒæ…®èˆ‡ç¬¬äº”å¤©çš„å®¤å…§è³¼ç‰©è¡Œç¨‹å°èª¿ã€‚" }
        ]
      },
      {
        day: 5, iso: "2025-08-23", date: "8æœˆ23æ—¥ (å…­)", title: "é¢è‡¨é™é›¨è€ƒé©—çš„å»£å®‰é‡Œä¹‹å¤œ",
        weather: { tempMin: 26, tempMax: 33, rainProb: 40, desc: "æ™´æ™‚å¤šé›²ï¼Œé™é›¨æ©Ÿç‡æå‡" },
        itinerary: [
          { time: "10:00", title: "æ–°ä¸–ç•Œç™¾è²¨", risk: "æ¥µä½", impact: "å®¤å…§æ´»å‹•ï¼Œä¸å—å½±éŸ¿ï¼Œæ˜¯çµ•ä½³çš„é›¨å¤©å‚™æ¡ˆé»ã€‚", advice: "è‹¥ä¸‹åˆå¤©æ°£ä¸ä½³ï¼Œå¯å»¶é•·åœ¨æ­¤çš„åœç•™æ™‚é–“ã€‚" },
          { time: "13:30", title: "å»£å®‰é‡Œæµ·ç˜", risk: "é«˜", impact: "æ´»å‹•å®Œå…¨ä¾è³´å¤©æ°£ã€‚40%é™é›¨æ©Ÿç‡æ„å‘³è‘—å¾ˆå¯èƒ½é‡åˆ°é™£é›¨ã€‚", advice: "ç•¶å¤©ä¸‹åˆè‹¥å¤©æ°£ä¸ä½³ï¼Œæ‡‰æœæ–·æ”¾æ£„æµ·ç˜è¡Œç¨‹ã€‚" },
          { time: "18:30", title: "The Bay 101 éŠè‰‡", risk: "é«˜", impact: "éŠè‰‡è¡Œç¨‹å¯èƒ½å› é›¨å–æ¶ˆã€‚", advice: "é è¨‚æ™‚ï¼Œå‹™å¿…é¸æ“‡å› å¤©æ°£ä¸ä½³å¯å…¨é¡é€€æ¬¾æˆ–å…è²»æ”¹æœŸçš„ä¾›æ‡‰å•†ã€‚å•Ÿå‹•å‚™æ¡ˆï¼Œæ”¹ç‚ºæ¢ç´¢å»£å®‰é‡Œå‘¨é‚Šçš„å®¤å…§å’–å•¡é¤¨æˆ–é¤å»³ã€‚" }
        ]
      },
      {
        day: 6, iso: "2025-08-24", date: "8æœˆ24æ—¥ (æ—¥)", title: "æ­¸é€”",
        weather: { tempMin: 25, tempMax: 33, rainProb: 40, desc: "æ™´æ™‚å¤šé›²" },
        itinerary: [
          { time: "12:30", title: "æ©Ÿå ´å…ç¨…åº—", risk: "ä½", impact: "å®¤å…§æ´»å‹•ï¼Œä¸å—å½±éŸ¿ã€‚", advice: "ç„¡éœ€ç‰¹åˆ¥æº–å‚™ã€‚" },
          { time: "14:15", title: "è¿”å°", risk: "ä¸­", impact: "ä¸»è¦é¢¨éšªåœ¨æ–¼è‹¥ä¸Šåˆå‡ºç¾å¼·é›·é™£é›¨ï¼Œå¯èƒ½å°è‡´å¸‚å€äº¤é€šå»¶èª¤ã€‚", advice: "è€ƒæ…®åˆ°é™é›¨å¯èƒ½ï¼Œå»ºè­°æ¯”åŸè¨ˆåŠƒå†ææ—©30åˆ†é˜å‡ºç™¼å‰å¾€æ©Ÿå ´ã€‚å‡ºç™¼å‰ç¢ºèªèˆªç­ç‹€æ…‹ã€‚" }
        ]
      }
    ];

    // === DOM åƒç…§ ===
    const navContainer = document.getElementById('day-navigation');
    const contentContainer = document.getElementById('daily-content');
    let charts = {};

    // === å·¥å…· ===
    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    function getRiskColor(risk) {
      switch (risk) {
        case 'é«˜': return 'bg-red-100 text-red-800';
        case 'ä¸­': return 'bg-yellow-100 text-yellow-800';
        case 'ä½': return 'bg-green-100 text-green-800';
        default: return 'bg-gray-100 text-gray-800';
      }
    }

    function pickDefaultDay() {
      // 1) ?day=3
      const params = new URLSearchParams(location.search);
      const byQuery = parseInt(params.get('day'));
      if (!Number.isNaN(byQuery)) return clamp(byQuery, 1, tripData.length);

      // 2) #day-3
      if (location.hash.startsWith('#day-')) {
        const byHash = parseInt(location.hash.replace('#day-', ''));
        if (!Number.isNaN(byHash)) return clamp(byHash, 1, tripData.length);
      }

      // 3) ä»Šå¤©åœ¨æ—…ç¨‹ç¯„åœå…§ â†’ é–‹åˆ°ä»Šå¤©ï¼›å¦å‰‡ Day 1
      const today = new Date().toISOString().slice(0, 10);
      const hit = tripData.find(d => d.iso === today);
      return hit ? hit.day : 1;
    }

    function navigateToDay(day) {
      showDay(day);
      if (location.hash !== `#day-${day}`) {
        history.replaceState(null, '', `#day-${day}`);
      }
    }

    // === Render ===
    function renderContent() {
      tripData.forEach(dayData => {
        // å°è¦½æŒ‰éˆ•
        const navButton = document.createElement('button');
        navButton.className = 'px-4 py-2 rounded-lg font-semibold transition-all duration-300 bg-white border border-gray-200 text-gray-600 hover:bg-gray-50';
        navButton.textContent = `Day ${dayData.day}`;
        navButton.dataset.day = dayData.day;
        navContainer.appendChild(navButton);

        // å…§å®¹å€
        const dayContent = document.createElement('div');
        dayContent.id = `day-${dayData.day}-content`;
        dayContent.className = 'day-content hidden';

        const itineraryHTML = dayData.itinerary.map(item => `
          <div class="relative pl-8">
            <div class="timeline-line"></div>
            <div class="timeline-item mb-8">
              <div class="flex items-center mb-2">
                <p class="font-bold text-[#A67B5B] text-lg">${item.time}</p>
                <span class="ml-3 px-2 py-0.5 text-xs font-medium rounded-full ${getRiskColor(item.risk)}">${item.risk}é¢¨éšª</span>
              </div>
              <div class="bg-white p-4 rounded-lg border border-gray-200">
                <p class="font-semibold text-lg text-gray-800">${item.title}</p>
                <div class="mt-3">
                  <button class="advice-toggle text-sm font-semibold text-[#A67B5B] hover:text-[#8c6649] flex items-center">
                    é¢¨éšªèˆ‡å»ºè­°
                    <span class="ml-1 transform transition-transform">â–¼</span>
                  </button>
                  <div class="advice-content mt-2 text-gray-600 text-sm">
                    <p><strong>å½±éŸ¿è©•ä¼°ï¼š</strong>${item.impact}</p>
                    <p class="mt-1"><strong>æ‡‰å°ç­–ç•¥ï¼š</strong>${item.advice}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `).join('');

        dayContent.innerHTML = `
          <section class="bg-[#F7F2EC] rounded-2xl p-6">
            <div class="md:flex md:items-start md:gap-6">
              <div class="flex-grow mb-6 md:mb-0">
                <h2 class="text-2xl font-bold text-[#A67B5B]">${dayData.title}</h2>
                <p class="text-gray-500">${dayData.date}</p>
                <div class="mt-4">
                  ${itineraryHTML}
                </div>
              </div>
              <div class="md:w-1/3 flex-shrink-0">
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                  <h3 class="font-bold text-center mb-2 text-gray-800">ç•¶æ—¥å¤©æ°£é€Ÿè¦½</h3>
                  <p class="text-center text-sm text-gray-500 mb-4">${dayData.weather.desc}</p>
                  <div class="chart-container relative h-64 w-full max-w-xs mx-auto">
                    <canvas id="chart-day-${dayData.day}"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </section>
        `;
        contentContainer.appendChild(dayContent);
      });
    }

    function createChart(day) {
      if (charts[day]) charts[day].destroy();

      const dayData = tripData.find(d => d.day === day);
      const canvas = document.getElementById(`chart-day-${day}`);
      if (!canvas) return;

      const ctx = canvas.getContext('2d');
      charts[day] = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['æº«åº¦ (Â°C)', 'é™é›¨æ©Ÿç‡ (%)'],
          datasets: [
            {
              label: 'æº«åº¦ (Max)',
              data: [dayData.weather.tempMax, null],
              backgroundColor: '#F5B041',
              borderColor: '#F39C12',
              borderWidth: 1,
              stack: 't',
              barThickness: 50
            },
            {
              label: 'æº«åº¦ (Min)',
              data: [dayData.weather.tempMin, null],
              backgroundColor: '#FAD7A0',
              stack: 't',
              barThickness: 50
            },
            {
              label: 'é™é›¨æ©Ÿç‡',
              data: [null, dayData.weather.rainProb],
              backgroundColor: '#5DADE2',
              borderColor: '#3498DB',
              borderWidth: 1,
              stack: 'r',
              barThickness: 50
            },
            {
              label: 'ç„¡é›¨æ©Ÿç‡',
              data: [null, 100 - dayData.weather.rainProb],
              backgroundColor: '#D6EAF8',
              stack: 'r',
              barThickness: 50
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  if (context.raw == null) return '';
                  const label = context.dataset.label;
                  if (label.includes('æº«åº¦')) {
                    return `æº«åº¦: ${dayData.weather.tempMin}Â°C - ${dayData.weather.tempMax}Â°C`;
                  }
                  if (label.includes('é™é›¨')) {
                    return `é™é›¨æ©Ÿç‡: ${dayData.weather.rainProb}%`;
                  }
                  if (label.includes('ç„¡é›¨')) {
                    return `ç„¡é›¨æ©Ÿç‡: ${100 - dayData.weather.rainProb}%`;
                  }
                  return '';
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              ticks: { callback: (v) => v }
            },
            x: { stacked: true }
          }
        }
      });
    }

    function showDay(day) {
      document.querySelectorAll('.day-content').forEach(el => el.classList.add('hidden'));
      const target = document.getElementById(`day-${day}-content`);
      if (target) target.classList.remove('hidden');

      document.querySelectorAll('#day-navigation button').forEach(btn => {
        if (parseInt(btn.dataset.day) === day) btn.classList.add('active-tab');
        else btn.classList.remove('active-tab');
      });

      createChart(day);
    }

    // === å•Ÿå‹• ===
    document.addEventListener('DOMContentLoaded', () => {
      renderContent();

      navContainer.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
          const day = parseInt(e.target.dataset.day);
          navigateToDay(day);
        }
      });

      contentContainer.addEventListener('click', (e) => {
        const toggleButton = e.target.closest('.advice-toggle');
        if (toggleButton) {
          const content = toggleButton.nextElementSibling;
          const icon = toggleButton.querySelector('span');
          content.classList.toggle('open');
          icon.style.transform = content.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
      });

      window.addEventListener('hashchange', () => {
        if (location.hash.startsWith('#day-')) {
          const d = parseInt(location.hash.replace('#day-', ''));
          if (!Number.isNaN(d)) showDay(clamp(d, 1, tripData.length));
        }
      });

      navigateToDay(pickDefaultDay());
    });
  </script>

  <!-- å…±ç”¨ header/footer æ³¨å…¥ï¼ˆä¿ç•™ deferï¼‰ -->
  <script src="../main.js" defer></script>
</body>
</html>
